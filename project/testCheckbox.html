<!DOCTYPE html>
<html>
	<head>
		<title>Bootstrap Example OBELIX Project</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		<script src="d3/d3.min.js" charset="utf-8"></script>
<!-- 		<link rel="stylesheet" type="text/css" href="d3line.css"/> -->
<style>

/*.bar {
  fill: steelblue;
}

.bar:hover {
  fill: brown;
}*/

.axis {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {
  display: none;
}

</style>
<body>

<p>Which characteristics would you like to see for all cohorts?</p>

<form action="form_action.asp">
<input type="checkbox" name="characteristic" value="Cohorts">Cohorts<br>
<input type="checkbox" name="characteristic" value="Weight_24m_(kg)">Weight 24m (kg)<br>
<input type="checkbox" name="characteristic" value="Birth_weight_(g)">Birth weight (g)<br>
<input type="checkbox" name="characteristic" value="Birth length (cm)">Birth length (cm)<br>
<input type="checkbox" name="characteristic" value="Gestational age (weeks)">Gestational age (weeks)<br>
<input type="checkbox" name="characteristic" value="Male">Male<br>
<input type="checkbox" name="characteristic" value="Female">Female<br>
<input type="checkbox" name="characteristic" value="Maternal age (years)">Maternal age (years)<br>
<input type="checkbox" name="characteristic" value="Maternal pre-pregnancy BMI">Maternal pre-pregnancy BMI<br>
<br>
<input type="button" onclick="generate_table()" value="Generate Table">
<br><br>
</form>

<script>
	function generate_table() {
		// to be done: remove table if the table was there before

		d3.json("data/cohort_trial.json", function(error, json) {
		  	if (error) return console.warn(error);
		  	data = json;

		  	// check the checkboxes (numbers)
			  // get the reference for the body
			  var body = document.getElementsByTagName("body")[0];
			 
			  // creates a <table> element and a <tbody> element
			  var tbl     = document.createElement("table");
			  var tblBody = document.createElement("tbody");
			 
	    var characteristics = document.forms[0];
	    // console.log(characteristics)
	    var i;
	    for (i = 0; i < characteristics.length; i++) {
	        if (characteristics[i].checked) {
	        	// creates a table row
    			var row = document.createElement("tr");
    			// create the cells for each row
	        	 for (var j = 0; j < data[i].length; j++) {
	      		// Create a <td> element and a text node, make the text
	      		// node the contents of the <td>, and put the <td> at
	      		// the end of the table row
				var cell = document.createElement("td");
				var cellText = document.createTextNode(data[i][j]);
				cell.appendChild(cellText);
				row.appendChild(cell);
				}
	        }
	       	tblBody.appendChild(row);
		}

				// put the <tbody> in the <table>
				tbl.appendChild(tblBody);
				// appends <table> into <body>
				body.appendChild(tbl);
				// sets the border attribute of tbl to 2;
				tbl.setAttribute("border", "2");			
		});
	}			
</script>

</body>
</html>
